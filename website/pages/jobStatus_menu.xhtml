<!--
  ~ Copyright (c) 2003-2022 Regents of the University of California and Broad Institute. All rights reserved.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">
    <ui:composition>
        <div id="menuDiv_#{jobStatusBean.jobInfo.jobNumber}" style="display:none;" class="popupMenu">
            <table>
                <tbody>
                    <tr>
                        <td>
                            <h:commandLink value="Download"
                                           actionListener="#{jobStatusBean.downloadZip}"
                                           immediate="true"
                                           rendered="#{jobStatusBean.finished and !jobStatusBean.jobInfo.visualizer}">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                            </h:commandLink>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandLink value="Reload"
                                           action="#{jobsBean.reload}"
                                           immediate="true">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                            </h:commandLink>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandLink value="Delete"
                                           onclick="return confirm('Are you sure you want to delete the selected job (#{jobStatusBean.jobInfo.jobNumber})?');"
                                           action="#{jobsBean.deleteAction}"
                                           rendered="#{jobStatusBean.jobInfo.permissions.deleteAllowed and jobStatusBean.jobInfo.finished}">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                            </h:commandLink>
                        </td>
                    </tr>

                    <tr>
                        <td>
                            <h:commandLink value="Terminate"
                                           actionListener="#{jobsBean.terminateJob}"
                                           rendered="#{!jobStatusBean.jobInfo.visualizer and !jobStatusBean.jobInfo.finished}"
                                           immediate="true">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                            </h:commandLink>
                        </td>
                    </tr>
                    <tr>
                        <td><img
                                src="#{facesContext.externalContext.requestContextPath}/images/divider-pix2.gif"
                                width="100%" height="1" /></td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandLink value="View Java Code"
                                           actionListener="#{jobsBean.viewCode}" target="_blank"
                                           immediate="true">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                                <f:param value="Java" name="language" />
                            </h:commandLink>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandLink value="View MATLAB Code"
                                           actionListener="#{jobsBean.viewCode}" target="_blank"
                                           immediate="true">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                                <f:param value="MATLAB" name="language" />
                            </h:commandLink>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <h:commandLink value="View R Code"
                                           actionListener="#{jobsBean.viewCode}" target="_blank"
                                           immediate="true">
                                <f:param value="#{jobStatusBean.jobInfo.jobNumber}" name="jobNumber" />
                                <f:param value="R" name="language" />
                            </h:commandLink>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


    </ui:composition>
</html>
