<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core">

  <!-- File section include for job results page.
       Inputs:   jobWrapper
   -->
  <ui:composition>
    <t:dataList var="fileInfo" value="#{jobWrapper.outputFileParameterInfos}" rowIndexVar="index">

      <!-- Generate ID for this row and append to the fileRows array for the containing job -->
      <script type="text/javascript" language="javascript">
        var rowId = 'file_row_' + '#{jobWrapper.jobNumber}_#{index}';
        addFileRow('#{parentJobNumber}', rowId);
      </script>

      <tr class="files" id="file_row_#{jobWrapper.jobNumber}_#{index}">
        <td>&#160;</td>
        <td>
          <!-- File selection checkbox -->
          <div align="center">
            <t:div rendered="#{fileInfo.selected}">
              <input type="checkbox" class="jobFile" name="selectedFiles" checked="checked" value="#{fileInfo.value}"/>
            </t:div>
            <t:div rendered="#{!fileInfo.selected}">
              <input type="checkbox" class="jobFile" name="selectedFiles" value="#{fileInfo.value}"/>
            </t:div>
          </div>
        </td>
        <td>&#160;</td>
        <td class="#{jobWrapper.level == 0 ? '' : 'pipelinefiles'}">
          <img src="#{facesContext.externalContext.requestContextPath}/images/divider-pix2.gif"
               width="4" height="4" hspace="6" vspace="2" border="0"/>

          <h:outputLink value="#{facesContext.externalContext.requestContextPath}/jobResults/#{jobWrapper.jobNumber}/#{fileInfo.name}">
            <h:outputText>#{fileInfo.name}</h:outputText>
          </h:outputLink>

          <!-- Image for popup menu -->
          <img src="#{facesContext.externalContext.requestContextPath}/images/menuicon-2.gif"
               name="Image_#{fileInfo.value}" id="Image_#{fileInfo.value}"
               width="14" height="14" border="0" align="top"
               onclick="pm_showMenu('menuDiv_#{fileInfo.value}', Position.cumulativeOffset(this), 50, 0);"
               onmouseover="MM_swapImage('Image_#{fileInfo.value}','','#{facesContext.externalContext.requestContextPath}/images/menuicon-over.gif',2)"
               onmouseout="MM_swapImgRestore();"/>
        </td>
        <td>#{fileInfo.formattedSize}</td>
        <td>&#160;</td>
        <td>
          <h:outputText value="#{fileInfo.lastModified}" converter="gp" />
        </td>
        <td>&#160;</td>
      </tr>
    </t:dataList>
  </ui:composition>
</html>
