<!--
  ~ Copyright 2012 The Broad Institute, Inc.
  ~ SOFTWARE COPYRIGHT NOTICE
  ~ This software and its documentation are the copyright of the Broad Institute, Inc. All rights are reserved.
  ~
  ~ This software is supplied without any warranty or guaranteed support whatsoever. The Broad Institute is not responsible for its use, misuse, or functionality.
  --><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:t="http://myfaces.apache.org/tomahawk" xmlns:a4j="https://ajax4jsf.dev.java.net/ajax" xmlns:c="http://java.sun.com/jsp/jstl/core" xmlns:fn="http://java.sun.com/jsp/jstl/functions">
    <ui:composition>
        <h:outputText rendered="#{eulaTaskBean.prompt}">

            <div class="barhead-task">
                <span>#{eulaTaskBean.currentTaskName} </span>
                <span class="license-version"> version #{eulaTaskBean.currentLsidVersion} </span>
            </div>

            <div class="license-lsid"> LSID=#{eulaTaskBean.currentLsid}</div>

            <h:outputText rendered="#{ fn:length(eulaTaskBean.eulas) == 1}">

                <h5 class="license-center">
                    You must agree below to the following End-User license agreement before you can run #{eulaTaskBean.currentTaskName}.
                </h5>

                <t:dataList var="eula" value="#{eulaTaskBean.eulas}">
                    <p><textarea rows="20" class="license-content" readonly="readonly">#{eula.content}</textarea></p>
                </t:dataList>
            </h:outputText>

            <h:outputText rendered="#{ fn:length(eulaTaskBean.eulas) > 1}">

                <h5 class="license-center">
                    You must below agree to the following End-User license agreements before you can run #{eulaTaskBean.currentTaskName}.
                </h5>

                <t:dataList var="eula" value="#{eulaTaskBean.eulas}">
                    <div class="barhead-license-task">
                        #{eula.taskName}
                        <span class="license-version"> version #{eula.lsidVersion} </span>
                    </div>
                    <p><textarea rows="20" class="license-content" readonly="readonly">#{eula.content}</textarea></p>
                </t:dataList>
            </h:outputText>
        </h:outputText>

        <h:outputText rendered="#{eulaTaskBean.prompt}" escape="false">
            <!-- Accept the EULA by POSTing to a servlet (standard HTTP rather than JSF) -->
            <div class="license-center">
                <form name="eula" action="#{facesContext.externalContext.requestContextPath}/eula" method="GET">
                    <input type="hidden" name="lsid" value="#{eulaTaskBean.currentLsid}" />
                    <input type="hidden" name="initialQueryString" value="#{eulaTaskBean.initialQueryString}" />
                    <input type="hidden" name="reloadJob" value="#{eulaTaskBean.reloadJobParam}" />

                    <h:outputText rendered="#{ fn:length(eulaTaskBean.eulas) == 1}">
                        <p class="license-agree-text">Do you accept the license agreement?</p>
                    </h:outputText>

                    <h:outputText rendered="#{ fn:length(eulaTaskBean.eulas) > 1}">
                        <p class="license-agree-text">Do you accept all the license agreements?</p>
                    </h:outputText>

        <span>
            <input type="submit" value="OK"></input>
            <input type="button" onclick="document.location='#{facesContext.externalContext.requestContextPath}/pages/index.jsf'" value="Cancel" />
        </span>
                </form>
            </div>
        </h:outputText>
    </ui:composition>
</html>