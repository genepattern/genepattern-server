<!--
  ~ Copyright 2012 The Broad Institute, Inc.
  ~ SOFTWARE COPYRIGHT NOTICE
  ~ This software and its documentation are the copyright of the Broad Institute, Inc. All rights are reserved.
  ~
  ~ This software is supplied without any warranty or guaranteed support whatsoever. The Broad Institute is not responsible for its use, misuse, or functionality.
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:a4j="http://richfaces.org/a4j"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jstl/core">

    <!-- File section include for job results page.
        Inputs:  jobInfo
                 step
                 indentLevel
    -->
    <ui:composition>
        <div id="jobContainer#{childJobInfo.jobNumber}">
            <table class="module" cellpadding="0" cellspacing="0" border="0" id="jobTable#{childJobInfo.jobNumber}">
                <tr>
                    <td class="module">
                        <t:dataList var="bunk" value="#{childJobInfo.numAncestors}" rowIndexVar="ancestorIndex">
                            <h:outputText rendered="#{ancestorIndex > 0}">
                                <img src="/gp/images/blank.gif" />
                            </h:outputText>
                        </t:dataList>
                        <img src="/gp/images/darkArrow.gif" /> step #{childJobInfo.stepPath}: #{childJobInfo.taskName} [id: #{childJobInfo.jobNumber}]
                    </td>
                    <td>
                        <h:outputText rendered="#{not empty childJobInfo.inputParameters}">
                            <div class="icon2">
                                <table cellpadding="0" border="0" cellspacing="0">
                                    <tr>
                                        <td><a href="javascript:toggle('inputParamsDiv#{childJobInfo.jobNumber}', 'Hide', 'Show');"
                                                ><img src="/gp/images/parameters.gif" align="left" height="24" vspace="4" /></a></td>
                                        <td><a style="color:#0066FF;" href="javascript:toggle('inputParamsDiv#{childJobInfo.jobNumber}', 'Hide', 'Show');"
                                                ><span style="color:#0066FF;" id="inputParamsDiv#{childJobInfo.jobNumber}Label">Show</span> Input <br />Parameters</a></td>
                                    </tr>
                                </table>
                            </div>
                        </h:outputText>
                    </td>
                    <td width="30px">
                        <h:outputText rendered="#{childJobInfo.status == 'Pending'}">Pending</h:outputText>
                        <h:outputText rendered="#{childJobInfo.status == 'Processing'}">
                            <img src="/gp/images/spin.gif" alt="#{childJobInfo.status}" id="jobStatusIcon#{childJobInfo.jobNumber}" />
                        </h:outputText>
                        <h:outputText rendered="#{childJobInfo.status == 'Finished'}">
                            <img src="/gp/images/complete.gif" alt="#{childJobInfo.status}" id="jobStatusIcon#{childJobInfo.jobNumber}" />
                        </h:outputText>
                        <h:outputText rendered="#{childJobInfo.status == 'Error'}">
                            <img src="/gp/images/error.gif" alt="#{childJobInfo.status}" border="0" id="jobStatusIcon#{childJobInfo.jobNumber}" />
                        </h:outputText>
                    </td>
                </tr>
            </table>
            <h:outputText rendered="#{childJobInfo.pipeline}">
                <ui:include src="jobStatus_indicator.xhtml">
                    <ui:param name="jobInfo" value="#{childJobInfo}" />
                </ui:include>
            </h:outputText>


            <ui:include src="jobStatus_inputParams.xhtml">
                <ui:param name="jobInfo" value="#{childJobInfo}" />
            </ui:include>


            <ui:include src="jobStatus_files.xhtml">
                <ui:param name="jobInfo" value="#{childJobInfo}" />
            </ui:include>

            <div id="fileMenus#{childJobInfo.jobNumber}">
                <t:dataList var="outputFile" value="#{childJobInfo.outputFiles}">
                    <ui:include src="jobStatus_fileMenu.xhtml">
                        <ui:param name="jobOnMenu" value="#{childJobInfo}" />
                        <ui:param name="isInputFile" value="false" />
                    </ui:include>
                </t:dataList>
            </div>

        </div>

    </ui:composition>
</html>